(this["webpackJsonpreact-site"]=this["webpackJsonpreact-site"]||[]).push([[0],{185:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c(2),n=c(32),r=c.n(n),i=c(11),l=c(13),o=(c(81),c(4)),j=c(7),d=(c(82),c.p+"static/media/logo.f5249f7d.png"),u=c(26),b=c(9),m=c(42);c(186);m.a.initializeApp({apiKey:"AIzaSyBR5Udyrwe7vwHQHhKnHtejPMSkYhqJ4NQ",authDomain:"picker-app-2cc6e.firebaseapp.com",databaseURL:"https://picker-app-2cc6e-default-rtdb.firebaseio.com",projectId:"picker-app-2cc6e",storageBucket:"picker-app-2cc6e.appspot.com",messagingSenderId:"923117820694",appId:"1:923117820694:web:847f20bd04a43aa02d8e37",measurementId:"G-1MD9BCVF0Y"});var O=m.a.firestore().collection("/items"),h={getAll:function(){return O},create:function(e){return O.add(e)},update:function(e,t){return O.doc(e).update(t)},remove:function(e){return O.doc(e).delete()}},p=function(){var e={title:"",description:"",published:!1},t=Object(s.useState)(e),c=Object(o.a)(t,2),n=c[0],r=c[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1],m=function(e){var t=e.target,c=t.name,a=t.value;r(Object(b.a)(Object(b.a)({},n),{},Object(u.a)({},c,a)))};return Object(a.jsx)("div",{className:"submit-form",children:j?Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"You submitted successfully!"}),Object(a.jsx)("button",{className:"btn btn-success",onClick:function(){r(e),d(!1)},children:"Add"})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:n.title,onChange:m,name:"title"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"description",children:"Description"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"description",required:!0,value:n.description,onChange:m,name:"description"})]}),Object(a.jsx)("button",{onClick:function(){var e={title:n.title,description:n.description,published:!1};h.create(e).then((function(){d(!0)})).catch((function(e){console.log(e)}))},className:"btn btn-success",children:"Submit"})]})})},f=c(68),x=function(e){var t=Object(s.useState)({key:null,title:"",description:"",activeStatus:!1}),c=Object(o.a)(t,2),n=c[0],r=c[1],i=Object(s.useState)(""),l=Object(o.a)(i,2),j=l[0],d=l[1],m=e.listitem;n.id!==m.id&&(r(m),d(""));var O=function(e){var t=e.target,c=t.name,a=t.value;r(Object(b.a)(Object(b.a)({},n),{},Object(u.a)({},c,a)))},p=function(e){h.update(n.id,{activeStatus:e}).then((function(){r(Object(b.a)(Object(b.a)({},n),{},{activeStatus:e})),console.log(n),!1===n.activeStatus?d("Updated status to active"):!0===n.activeStatus?d("Updated status to draft"):d("Updated status to active")})).catch((function(e){console.log(e)}))};return Object(a.jsx)("div",{children:n?Object(a.jsxs)("div",{className:"edit-form",children:[Object(a.jsx)("h4",{children:"Edit Item"}),Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"title",name:"title",value:n.title,onChange:O})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"description",children:"Description"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"description",name:"description",value:n.description,onChange:O})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:Object(a.jsx)("strong",{children:"Status:\xa0"})}),n.activeStatus?"Active":"Draft"]})]}),n.activeStatus?Object(a.jsx)("button",{className:"badge-primary mr-2 btn-e",onClick:function(){return p(!1)},children:"Draft"}):Object(a.jsx)("button",{className:"badge-primary mr-2 btn-e",onClick:function(){return p(!0)},children:"Active"}),Object(a.jsx)("button",{className:"badge-danger mr-2 btn-e",onClick:function(){h.remove(n.id).then((function(){e.refreshList()})).catch((function(e){console.log(e)}))},children:"Delete"}),Object(a.jsx)("button",{type:"submit",className:"badge-success btn-e",onClick:function(){var e={title:n.title,description:n.description};h.update(n.id,e).then((function(){d(n.title+" was updated successfully!")})).catch((function(e){console.log(e)}))},children:"Update"}),Object(a.jsx)("p",{children:j})]}):Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Please click on a Item..."})})})},v=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(-1),i=Object(o.a)(r,2),l=i[0],j=i[1],d=Object(f.a)(h.getAll().orderBy("title","asc")),u=Object(o.a)(d,3),b=u[0],m=u[1],O=u[2];return Object(a.jsxs)("div",{className:"list row",children:[Object(a.jsxs)("div",{className:"col-md-6 mobileS",children:[Object(a.jsx)("h4",{children:"Items List"}),O&&Object(a.jsxs)("strong",{children:["Error: ",O]}),m&&Object(a.jsx)("span",{children:"Loading..."}),Object(a.jsx)("ul",{className:"list-group pointer",children:!m&&b&&b.docs.map((function(e,t){return Object(a.jsx)("li",{className:"list-group-item "+(t===l?"active":""),onClick:function(){return function(e,t){var c=e.data(),a=c.title,s=c.description,r=c.published;n({id:e.id,title:a,description:s,published:r}),j(t)}(e,t)},children:e.data().title},e.id)}))})]}),Object(a.jsx)("div",{className:"col-md-6",children:c?Object(a.jsx)(x,{listitem:c,refreshList:function(){n(null),j(-1)}}):Object(a.jsxs)("div",{children:[Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Click on an item to edit it here"})]})})]})},g=(c(83),c(34)),N=c.n(g),S=c(24),y=c.n(S),k=c(35),I=c.n(k),E="REGISTER_SUCCESS",w="REGISTER_FAIL",L="LOGIN_SUCCESS",C="LOGIN_FAIL",A="LOGOUT",T="SET_MESSAGE",R="CLEAR_MESSAGE",U=c(22),D=c.n(U),F="http://localhost:8080/api/auth/",_=function(e,t,c){return D.a.post(F+"signup",{username:e,email:t,password:c})},P=function(e,t){return D.a.post(F+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},B=function(){localStorage.removeItem("user")},G=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},M=function(e){var t=Object(s.useRef)(),c=Object(s.useRef)(),n=Object(s.useState)(""),r=Object(o.a)(n,2),i=r[0],d=r[1],u=Object(s.useState)(""),b=Object(o.a)(u,2),m=b[0],O=b[1],h=Object(s.useState)(!1),p=Object(o.a)(h,2),f=p[0],x=p[1],v=Object(l.c)((function(e){return e.auth})).isLoggedIn,g=Object(l.c)((function(e){return e.message})).message,S=Object(l.b)();return v?Object(a.jsx)(j.a,{to:"/profile"}):Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(N.a,{onSubmit:function(a){a.preventDefault(),x(!0),t.current.validateAll(),0===c.current.context._errors.length?S(function(e,t){return function(c){return P(e,t).then((function(e){return c({type:L,payload:{user:e}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return c({type:C}),c({type:T,payload:t}),Promise.reject()}))}}(i,m)).then((function(){e.history.push("/profile"),window.location.reload()})).catch((function(){x(!1)})):x(!1)},ref:t,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"username",value:i,onChange:function(e){var t=e.target.value;d(t)},validations:[G]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(y.a,{type:"password",className:"form-control",name:"password",value:m,onChange:function(e){var t=e.target.value;O(t)},validations:[G]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"btn btn-primary btn-block",disabled:f,children:[f&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(a.jsx)("span",{children:"Login"})]})}),g&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:g})}),Object(a.jsx)(I.a,{style:{display:"none"},ref:c})]})]})})},J=c(69),q=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},H=function(e){if(!Object(J.isEmail)(e))return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},z=function(e){if(e.length<3||e.length>20)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},Y=function(e){if(e.length<6||e.length>40)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},K=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useState)(""),n=Object(o.a)(c,2),r=n[0],i=n[1],j=Object(s.useState)(""),d=Object(o.a)(j,2),u=d[0],b=d[1],m=Object(s.useState)(""),O=Object(o.a)(m,2),h=O[0],p=O[1],f=Object(s.useState)(!1),x=Object(o.a)(f,2),v=x[0],g=x[1],S=Object(l.c)((function(e){return e.message})).message,k=Object(l.b)();return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(N.a,{onSubmit:function(c){c.preventDefault(),g(!1),e.current.validateAll(),0===t.current.context._errors.length&&k(function(e,t,c){return function(a){return _(e,t,c).then((function(e){return a({type:E}),a({type:T,payload:e.data.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return a({type:w}),a({type:T,payload:t}),Promise.reject()}))}}(r,u,h)).then((function(){g(!0)})).catch((function(){g(!1)}))},ref:e,children:[!v&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var t=e.target.value;i(t)},validations:[q,z]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"email",value:u,onChange:function(e){var t=e.target.value;b(t)},validations:[q,H]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(y.a,{type:"password",className:"form-control",name:"password",value:h,onChange:function(e){var t=e.target.value;p(t)},validations:[q,Y]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),S&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:v?"alert alert-success":"alert alert-danger",role:"alert",children:S})}),Object(a.jsx)(I.a,{style:{display:"none"},ref:t})]})]})})};function Q(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var V="http://localhost:8080/api/test/",W=function(){return D.a.get(V+"all")},X=function(){return D.a.get(V+"user",{headers:Q()})},Z=function(){return D.a.get(V+"mod",{headers:Q()})},$=function(){return D.a.get(V+"admin",{headers:Q()})},ee=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(s.useEffect)((function(){W().then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();n(t)}))}),[]),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:c})})})},te=function(){var e=Object(l.c)((function(e){return e.auth})).user;return e?Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("strong",{children:e.username})," Profile"]})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(a.jsx)("strong",{children:"Authorities:"}),Object(a.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})]}):Object(a.jsx)(j.a,{to:"/login"})},ce=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(s.useEffect)((function(){X().then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t)}))}),[]),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:c})})})},ae=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(s.useEffect)((function(){Z().then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t)}))}),[]),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:c})})})},se=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(s.useEffect)((function(){$().then((function(e){n(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();n(t)}))}),[]),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:c})})})},ne=c(14),re=Object(ne.a)();var ie=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(!1),u=Object(o.a)(r,2),b=u[0],m=u[1],O=Object(l.c)((function(e){return e.auth})).user,h=Object(l.b)();return Object(s.useEffect)((function(){re.listen((function(e){h({type:R})}))}),[h]),Object(s.useEffect)((function(){O&&(n(O.roles.includes("ROLE_MODERATOR")),m(O.roles.includes("ROLE_ADMIN")))}),[O]),Object(a.jsx)(i.b,{history:re,children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(a.jsx)("a",{href:"/ItemsList",className:"navbar-brand",children:Object(a.jsx)("img",{src:d,alt:"logo",className:"logo"})}),Object(a.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/ItemsList",className:"nav-link",children:"View List"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/AddItem",className:"nav-link",children:"Add Items"})})]}),Object(a.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/home",className:"nav-link",children:"Home"})}),c&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/mod",className:"nav-link",children:"Moderator Board"})}),b&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/admin",className:"nav-link",children:"Admin Board"})}),O&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/user",className:"nav-link",children:"User"})})]}),O?Object(a.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/profile",className:"nav-link",children:O.username})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/login",className:"nav-link",onClick:function(){h((function(e){B(),e({type:A})}))},children:"LogOut"})})]}):Object(a.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/login",className:"nav-link",children:"Login"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.c,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(a.jsx)("div",{className:"container mt-3",children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:["/","/home"],component:ee}),Object(a.jsx)(j.b,{exact:!0,path:"/login",component:M}),Object(a.jsx)(j.b,{exact:!0,path:"/register",component:K}),Object(a.jsx)(j.b,{exact:!0,path:"/profile",component:te}),Object(a.jsx)(j.b,{path:"/user",component:ce}),Object(a.jsx)(j.b,{path:"/mod",component:ae}),Object(a.jsx)(j.b,{path:"/admin",component:se}),Object(a.jsx)(j.b,{exact:!0,path:"/ItemsList",component:v}),Object(a.jsx)(j.b,{exact:!0,path:"/AddItem",component:p})]})})]})})},le=c(21),oe=c(70),je=c(71),de=JSON.parse(localStorage.getItem("user")),ue=de?{isLoggedIn:!0,user:de}:{isLoggedIn:!1,user:null},be={},me=Object(le.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case E:case w:return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:!1});case L:return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:!0,user:a.user});case C:case A:return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case T:return{message:a};case R:return{message:""};default:return e}}}),Oe=[je.a],he=Object(le.createStore)(me,Object(oe.composeWithDevTools)(le.applyMiddleware.apply(void 0,Oe)));r.a.render(Object(a.jsx)(l.a,{store:he,children:Object(a.jsx)(i.a,{children:Object(a.jsx)(ie,{})})}),document.getElementById("root"))},81:function(e,t,c){},82:function(e,t,c){}},[[185,1,2]]]);
//# sourceMappingURL=main.d1c69e0c.chunk.js.map